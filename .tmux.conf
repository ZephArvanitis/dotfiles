# Load reset file firest
source-file ~/.tmux.reset.conf
# Reload config file using ^B r
bind r source-file ~/.tmux.conf

# Use vi mode
set-window-option -g mode-keys vi

# Vim shortcuts
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Next and previous windows
bind n next-window
bind p previous-window

# Clipboard -> tmux paste buffer
bind C-x run "tmux display-message \"hello world\""
bind C-p run "tmux display-message \"failed to paste\""
bind C-p run "tmux set-buffer \"$(xclip -o)\"; tmux display-message \"pasted?\""
# tmux paste buffer -> clipboard
bind C-y run-shell "tmux save-buffer - | xclip -i && tmux display-message \"buffer copied to clipboard\""

# Copy mode
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind-key -T copy-mode-vi 'y' send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi 'V' send-keys -X rectangle-toggle
bind-key -T copy-mode-vi 'Y' send-keys -X copy-end-of-line

# Change color of status bar to check that conf is updated
set -g status-bg green
# Mouse mode? From https://www.unixtutorial.org/tmux-mouse-mode-in-macos/
# Custom mouse settings
# Resize panes
bind-key -T root MouseDrag1Border resize-pane -M
# Select windows by clicking (or ^B n/p)
bind-key -T root MouseDown1Status select-window -t =
# set -g mouse on
# bind-key -n DoubleClick1Pane \
#     select-pane \; \
#     copy-mode -M \; \
#     send-keys -X select-word \; \
#     send-keys -X copy-selection-and-cancel\; run "tmux save-buffer - | pbcopy"

# set -g mouse-select-pane off
# set -g mouse-resize-pane off
